var game,snake,food,bonus,UP=0,DOWN=1,LEFT=2,RIGHT=3,CELL=32,game_version="v 0.1.7",game_session={ts:0,game_id:"",action:{startGameSession:0,startGame:0,levelUp:0,gameOver:0,closeGameSession:0},score:null,highscore:null,level:null,onClose:!1};function getTexturePack(){return Math.floor(3*Math.random())}var gameState={onMenu:!1,onPause:!1,isOver:!1,onGame:!1,score:0};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function t(){};return{s:n,n:function e(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function t(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,a=!1;return{s:function e(){i=i.call(t)},n:function t(){var e=i.next();return r=e.done,e},e:function t(e){a=!0,s=e},f:function t(){try{r||null==i.return||i.return()}finally{if(a)throw s}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,e)}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==_typeof(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){return e.__proto__=i,e})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function i(){var o,n=_getPrototypeOf(t);if(e){var s=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}window.onload=function(){var t={type:Phaser.CANVAS,width:1920,height:1080,backgroundColor:"#000",parent:"phaser-example",scene:[preloader,mainMenu,snacegame,scenePause,gameOver],physics:{default:"arcade"},scale:{mode:Phaser.Scale.FIT},audio:{noAudio:!0}};document.getElementsByTagName("canvas").outline=0,game=new Phaser.Game(t)};var Entity=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(t,o,n,s){var r;return _classCallCheck(this,i),(r=e.call(this,t,o,n)).scene=t,r.scene.add.existing(_assertThisInitialized(r)),r.setData("type",s),r.setData("isDead",!1),r}return _createClass(i)}(Phaser.GameObjects.Image),Food=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(t,o,n){var s;return _classCallCheck(this,i),(s=e.call(this,t,o,n)).body=s.scene.physics.add.sprite(o*CELL,n*CELL,"food").play("food-animation"),s.body.setDisplaySize(32,32),s.body.setSize(30,30,!0),s.body.setOrigin(.5),s.total=0,s}return _createClass(i,[{key:"eat",value:function t(){this.total++}}]),i}(Entity),Bonus=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(t,o,n,s,r){var a;return _classCallCheck(this,i),(a=e.call(this,t,o,n)).onPlate=!1,a.body=a.scene.physics.add.sprite(o*CELL,n*CELL,s).play("bonus-animation_".concat(r)),a.body.setDisplaySize(32,32),a.body.setOrigin(.5),a.index=r,a.bonusSound=a.scene.sound.add("bonus",{loop:!1,volume:.5}),a.scene.anims.create({key:"bonus-animation_0",frames:[{key:"bonus_small_".concat(0),duration:500},{key:"bonus_".concat(0),duration:500},{key:"bonus_big_".concat(0),duration:500}],frameRate:6,repeat:-1}),a.scene.anims.create({key:"bonus-animation_1",frames:[{key:"bonus_small_".concat(1),duration:500},{key:"bonus_".concat(1),duration:500},{key:"bonus_big_".concat(1),duration:500}],frameRate:6,repeat:-1}),a}return _createClass(i)}(Entity),Snake=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(t,o,n){var s;return _classCallCheck(this,i),(s=e.call(this,t,o,n)).headPosition=new Phaser.Geom.Point(o,n),s.body=t.add.group(),s.head=s.scene.physics.add.sprite(o*CELL,n*CELL,"head_".concat(mainMenu.texturePack)).play("liking_".concat(mainMenu.texturePack)),s.body.add(s.head),s.head.setOrigin(.5),s.head.setScale(.4),s.head.setDepth(4),s.head.rotation=4.7,s.alive=!0,s.speed=130,s.moveTime=0,s.tail=s.scene.physics.add.sprite(s.head.x,s.head.y,"tail_".concat(mainMenu.texturePack)),s.body.add(s.tail),s.tail.setOrigin(.5),s.tail.setDisplaySize(32,32),s.tail.setSize(32,32,!0),s.bodyGraphics=s.scene.add.graphics(),s.end=new Phaser.Geom.Point(o,n),s.heading=RIGHT,s.direction=RIGHT,s.bodySegments=s.body.getChildren(),s.onGod=!1,s.biteSound=s.scene.sound.add("bite",{loop:!1,volume:.5}),s.leftSound=s.scene.sound.add("left",{loop:!1,volume:.5}),s.rightSound=s.scene.sound.add("right",{loop:!1,volume:.5}),s.upSound=s.scene.sound.add("up",{loop:!1,volume:.5}),s.downSound=s.scene.sound.add("down",{loop:!1,volume:.5}),s.deadSound=s.scene.sound.add("lose",{loop:!1,volume:.5}),s.turnPoints=[],new Phaser.Geom.Point(s.head.x,s.head.y).name="turnPointL",new Phaser.Geom.Point(s.head.x,s.head.y).name="turnPointR",new Phaser.Geom.Point(s.head.x,s.head.y).name="turnPointU",new Phaser.Geom.Point(s.head.x,s.head.y).name="turnPointD",s}return _createClass(i,[{key:"snakeRotation",value:function t(){for(var e=0;e<this.turnPoints.length;e++)for(var i=1;i<this.bodySegments.length;i++)this.bodySegments[i].x==this.turnPoints[e].x&&this.bodySegments[i].y==this.turnPoints[e].y&&(this.bodySegments[i].rotation=this.bodySegments[i-1].rotation)}},{key:"updateBodyGraphics",value:function t(){for(var e=[this.bodySegments[0]],i=!0,o=1;o<this.bodySegments.length-1;o++){i?this.bodySegments[o].y!=e[e.length-1].y&&(e.push(this.bodySegments[o-1]),i=!1):this.bodySegments[o].x!=e[e.length-1].x&&(e.push(this.bodySegments[o-1]),i=!0);var n,s=this.bodySegments[o].x,r=this.bodySegments[o].y;Math.abs(s-this.bodySegments[o-1].x)==CELL^Math.abs(r-this.bodySegments[o-1].y)==CELL||(e.push(this.bodySegments[o-1]),e.push(null),e.push(this.bodySegments[o]))}switch(e.push(this.bodySegments[this.bodySegments.length-2]),(e=this.removeDuplicatesKeepFirst(e)).length>=2&&this.bodyGraphics.clear(),mainMenu.texturePack){case 0:this.bodyGraphics.fillStyle(16742656);break;case 1:this.bodyGraphics.fillStyle(16207978);break;case 2:this.bodyGraphics.fillStyle(15919136)}for(var a=1;a<e.length;a++){var u=e[a-1],c=e[a];null!=u&&null!=c&&(u.x==c.x?this.bodyGraphics.fillRoundedRect(Math.min(u.x,c.x)-14,Math.min(u.y,c.y)-14,28,Math.abs(u.y-c.y)+28,6):u.y==c.y&&this.bodyGraphics.fillRoundedRect(Math.min(u.x,c.x)-14,Math.min(u.y,c.y)-14,Math.abs(u.x-c.x)+28,28,6))}this.bodyGraphics.fillPath()}},{key:"removeDuplicatesKeepFirst",value:function t(e){var i=new Set;return e.filter(function(t){return!(null!==t&&i.has(t))&&(i.add(t),!0)})}},{key:"update",value:function t(e){if(!0==gameState.onGame&&(this.updateBodyGraphics(),this.snakeRotation(),e>=this.moveTime))return this.move(e)}},{key:"faceLeft",value:function t(){if(!0==gameState.onGame&&(this.direction===UP||this.direction===DOWN)){this.heading=LEFT,this.leftSound.play(),this.head.rotation=1.57079;var e=new Phaser.Geom.Point(this.head.x,this.head.y);this.turnPoints.push(e)}}},{key:"faceRight",value:function t(){if(!0==gameState.onGame&&(this.direction===UP||this.direction===DOWN)){this.heading=RIGHT,this.rightSound.play(),this.head.rotation=4.71238;var e=new Phaser.Geom.Point(this.head.x,this.head.y);this.turnPoints.push(e)}}},{key:"faceUp",value:function t(){if(!0==gameState.onGame&&(this.direction===LEFT||this.direction===RIGHT)){this.heading=UP,this.upSound.play(),this.head.rotation=3.14159;var e=new Phaser.Geom.Point(this.head.x,this.head.y);this.turnPoints.push(e)}}},{key:"faceDown",value:function t(){if(!0==gameState.onGame&&(this.direction===LEFT||this.direction===RIGHT)){this.heading=DOWN,this.downSound.play(),this.head.rotation=0;var e=new Phaser.Geom.Point(this.head.x,this.head.y);this.turnPoints.push(e)}}},{key:"move",value:function t(e){if(!0==gameState.onGame){if(!1===this.onGod)switch(this.heading){case LEFT:this.headPosition.x=Phaser.Math.Clamp(this.headPosition.x-1,3,game.config.width/CELL-3);break;case RIGHT:this.headPosition.x=Phaser.Math.Clamp(this.headPosition.x+1,3,game.config.width/CELL-3);break;case UP:this.headPosition.y=Phaser.Math.Clamp(this.headPosition.y-1,6,game.config.height/CELL-2);break;case DOWN:this.headPosition.y=Phaser.Math.Clamp(this.headPosition.y+1,6,game.config.height/CELL-2)}else if(!0==this.onGod)switch(this.heading){case LEFT:this.headPosition.x=Phaser.Math.Wrap(this.headPosition.x-1,3,game.config.width/CELL-2);break;case RIGHT:this.headPosition.x=Phaser.Math.Wrap(this.headPosition.x+1,2,game.config.width/CELL-3);break;case UP:this.headPosition.y=Phaser.Math.Wrap(this.headPosition.y-1,6,game.config.height/CELL-1);break;case DOWN:this.headPosition.y=Phaser.Math.Wrap(this.headPosition.y+1,6,game.config.height/CELL-2)}return(this.direction=this.heading,Phaser.Actions.ShiftPosition(this.body.children.entries,this.headPosition.x*CELL,this.headPosition.y*CELL,1,this.end),Phaser.Actions.GetFirst(this.bodySegments,{x:this.head.x,y:this.head.y},1)&&!1==this.onGod)?(console.log("dead"),this.alive=!1,this.deadSound.play(),!1):(this.moveTime=e+this.speed,this.alive=!0,!0)}}},{key:"grow",value:function t(){var e=this;this.bodySegments[1].setSize(30,30,!0),this.tail.setTexture("body_".concat(mainMenu.texturePack)),this.tail.setDisplaySize(30,30),this.tail.alpha=0,this.tail=this.scene.add.sprite(this.head.x,this.head.y,"tail_".concat(mainMenu.texturePack)),this.tail.rotation=this.bodySegments[this.bodySegments.length-1].rotation,this.tail.alpha=0,this.body.add(this.tail),this.tail.setOrigin(.5),this.tail.setDisplaySize(40,40),this.bodySegments.forEach(function(t){t.setDisplaySize(30,30),t.setSize(30,30,!0),t.alpha=0,e.head.alpha=1,e.head.setScale(.4)})}},{key:"godMode",value:function t(){var e=this;this.onGod=!0,this.head.stop("liking_".concat(mainMenu.texturePack)),this.head.play("onGodeAnimation_".concat(mainMenu.texturePack)),setTimeout(function(){e.onGod=!1,e.head.play("liking_".concat(mainMenu.texturePack))},15e3)}},{key:"speedUp",value:function t(){var e=this;this.speed-=50,setTimeout(function(){e.speed+=50},15e3)}},{key:"collideWithBonus",value:function t(e){return void 0!=this.scene.bonus.body&&this.head.x===e.body.x&&this.head.y===e.body.y&&(1!==e.index?this.speedUp():this.godMode(),e.bonusSound.play(),!0)}},{key:"collideWithFood",value:function t(e){return this.head.x===e.body.x&&this.head.y===e.body.y&&(this.grow(),e.eat(),this.biteSound.play(),this.speed<150&&e.total%5==0&&(this.speed+=5),!0)}},{key:"updateGrid",value:function t(e){var i,o=_createForOfIteratorHelper(this.body.getChildren());try{for(o.s();!(i=o.n()).done;){var n=i.value,s=n.y/CELL;e[n.x/CELL][s]=!1}}catch(r){o.e(r)}finally{o.f()}return e}}]),i}(Entity);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function t(){};return{s:n,n:function e(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function t(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,a=!1;return{s:function e(){i=i.call(t)},n:function t(){var e=i.next();return r=e.done,e},e:function t(e){a=!0,s=e},f:function t(){try{r||null==i.return||i.return()}finally{if(a)throw s}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,e)}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==_typeof(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){return e.__proto__=i,e})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function i(){var o,n=_getPrototypeOf(t);if(e){var s=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}var SnakeGame=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(){return _classCallCheck(this,i),e.call(this,{key:"snakegame"})}return _createClass(i,[{key:"create",value:function t(){var e=this;game_session.action.startGame=new Date().getTime(),console.log(game_session.action.startGame),gameState.onGame=!0,this.texturePack=mainMenu.texturePack,this.backGround=this.add.image(game.config.width/2,game.config.height/2,"background_".concat(this.texturePack)).setOrigin(.5),this.backGround.setDisplaySize(game.config.width,game.config.height+16),this.bgmusic=this.sound.add("background-music",{loop:!1,volume:.5}),this.marker=0,this.bgmusic.play(),this.scoreText=this.add.text(game.config.width/2-100,55,"".concat(gameState.score),{fontFamily:"Nunito",fontStyle:"bold",fontSize:"40px",fill:"white",textAlign:"start"}).setOrigin(.5),this.scoreIcon=this.add.image(this.scoreText.x-90,this.scoreText.y,"scoreIcon").setOrigin(.5).setDisplaySize(60,66),this.gameInfo=this.add.image(265,60,"info").setScale(.43).setOrigin(.5),this.food=food=new Food(snacegame,30,20,"food"),this.snake=snake=new Snake(snacegame,20,20,"body_0"),this.snake.grow(),this.snake.grow(),document.addEventListener("keydown",function(t){(8==t.keyCode||10009==t.keyCode||461==t.keyCode||166==t.keyCode||196==t.keyCode)&&e.pause()}),this.loadScore(),console.log(this.snake),this.snake.bodySegments[1].setSize(30,30,!0),this.snake.bodySegments[1].depth=this.food.body.depth,this.physics.add.collider(this.snake.bodySegments[1],this.food.body,function(){e.snake.grow(),e.repositionFood(),e.snake.biteSound.play(),gameState.score+=1},null,this),this.stopSound=setInterval(function(){e.soundOff(),e.marker>=5&&clearInterval(e.stopSound)&&e.bgmusic.stop()},1e3),this.versionText=this.add.text(game.config.width-60,game.config.height-40,"".concat(game_version),{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"30px",fill:"#fff"}).setOrigin(.5),this.getField()}},{key:"soundOff",value:function t(){this.bgmusic.volume>0&&(this.bgmusic.volume-=.1,this.marker++)}},{key:"loadScore",value:function t(){localStorage.getItem("heighScore_snake")&&(console.log(localStorage.getItem("heighScore_snake")),this.hieghScoreText=this.add.text(this.scoreText.x+260,this.scoreText.y,"".concat(JSON.parse(localStorage.getItem("heighScore_snake"))),{fontFamily:"Nunito",fontStyle:"bold",fontSize:"40px",fill:"white",textAlign:"start"}).setOrigin(.5),this.hieghScoreIcon=this.add.image(this.hieghScoreText.x-90,this.hieghScoreText.y,"bestIcon").setDisplaySize(72,66).setOrigin(.5))}},{key:"pause",value:function t(){gameState.onGame=!1,this.scene.pause(snacegame),this.scene.launch(scenePause)}},{key:"addBonus",value:function t(e,i,o){var n=this;gameState.score>0&&gameState.score%10==0&&(this.bonus=new Bonus(this,e,i,"bonus_".concat(o),o),console.log(o),console.log(this.bonus),this.physics.add.collider(this.snake.bodySegments[1],this.bonus.body,function(){n.bonus.bonusSound.play(),0==n.bonus.index&&n.snake.speedUp(),1==n.bonus.index&&n.snake.godMode(),n.bonus.destroy()},null,this),setTimeout(function(){n.bonus.destroy()},12e3))}},{key:"update",value:function t(e,i){this.marker>=5&&clearInterval(this.stopSound)&&this.bgmusic.stop(),this.scoreText.setText("".concat(gameState.score)),game_session.score=gameState.score,snake.update(e)&&void 0!=this.bonus&&snake.collideWithBonus(this.bonus)&&this.bonus.destroy(),snake.alive||(this.snake.destroy(),this.scene.start("gameOver"))}},{key:"repositionFood",value:function t(){var e,i=[],o=_createForOfIteratorHelper(this.snake.bodySegments);try{for(o.s();!(e=o.n()).done;){var n=e.value;i.push({x:n.x,y:n.y})}}catch(s){o.e(s)}finally{o.f()}if(console.log(i),!(validLocationsX.length>0))return!1;var r,a={x:this.getPositionX(),y:this.getPositionY()},u={x:this.getPositionX(),y:this.getPositionY()},c=_createForOfIteratorHelper(i);try{for(c.s();!(r=c.n()).done;){var h=r.value;a.x==Math.floor(h.x/CELL)&&a.y==Math.floor(h.y/CELL)?(a={x:this.getPositionX(),y:this.getPositionY()},console.log(a.x,a.y)):u.x==Math.floor(h.x/CELL)&&u.y==Math.floor(h.y/CELL)&&(u={x:this.getPositionX(),y:this.getPositionY()})}}catch(l){c.e(l)}finally{c.f()}return food.body.setPosition(a.x*CELL,a.y*CELL),this.addBonus(u.x,u.y,Math.floor(2*Math.random())),!0}},{key:"getPositionX",value:function t(){return Phaser.Math.RND.pick(validLocationsX)}},{key:"getPositionY",value:function t(){return Phaser.Math.RND.pick(validLocationsY)}},{key:"getField",value:function t(){for(var e=6;e<game.config.height/CELL-2;e++)validLocationsY.push(Math.floor(e));for(var i=3;i<game.config.width/CELL-3;i++)validLocationsX.push(Math.floor(i))}}]),i}(Phaser.Scene),validLocationsY=[],validLocationsX=[],snacegame=new SnakeGame;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==_typeof(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){return e.__proto__=i,e})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function i(){var o,n=_getPrototypeOf(t);if(e){var s=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}var GameOver=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(){return _classCallCheck(this,i),e.call(this,{key:"gameOver"})}return _createClass(i,[{key:"create",value:function t(){var e=this;game_session.action.gameOver=new Date().getTime(),console.log(game_session.action.gameOver),snacegame.bgmusic.stop(),gameState.onGame=!1,gameState.isOver=!0,this.menuBG=this.add.image(game.config.width/2,game.config.height/2,"mainBG_".concat(mainMenu.texturePack)).setOrigin(.5),this.menuBG.setDisplaySize(game.config.width,game.config.height),this.gameOverImg=this.add.image(game.config.width/2,game.config.height/2,"menuGameOver").setOrigin(.5),this.gameOverImg.setDisplaySize(game.config.width,game.config.height),this.scoreText=this.add.text(game.config.width/2,game.config.height-150,"СЧЁТ: ".concat(gameState.score),{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"32px",fill:"#2E3D66"}).setOrigin(.5),this.scoreText.setOrigin(.5),this.btnRestart=this.add.sprite(game.config.width/2,game.config.height/2+100,"button"),this.btnRestart.setOrigin(.5),this.btnRestart.setScale(.5),this.btnClose=this.add.sprite(this.btnRestart.x,this.btnRestart.y+120,"button").setScale(.5),this.btnClose.setOrigin(.5),this.selector=this.add.sprite(this.btnRestart.x,this.btnRestart.y,"selector"),this.selector.setOrigin(.5),this.selector.setScale(.44),this.btnRestart.setInteractive(),this.btnClose.setInteractive(),this.btnRestartText=this.add.text(game.config.width/2,game.config.height/2+100,"ЗАНОВО",{fontFamily:"Nunito",fontSize:"60px",fontStyle:"bold",align:"center",color:"black"}),this.btnRestartText.setOrigin(.5),this.btnCloseText=this.add.text(this.btnClose.x,this.btnClose.y,"ВЫЙТИ",{fontFamily:"Nunito",fontSize:"60px",fontStyle:"bold",align:"center",color:"black"}),this.btnCloseText.setOrigin(.5),this.btnRestart.on("pointerdown",this.startGame,this),this.btnClose.on("pointerdown",this.exit,this),this.input.keyboard.on("keydown-ENTER",this.gameToggle,this),document.addEventListener("keydown",function(t){(8==t.keyCode||10009==t.keyCode||461==t.keyCode||166==t.keyCode||196==t.keyCode)&&e.onPressExit()}),this.saveScore(),this.loadScore(),game_session.score=gameState.score,this.versionText=this.add.text(game.config.width-60,game.config.height-40,"".concat(game_version),{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"30px",fill:"#fff"}).setOrigin(.5)}},{key:"selectorDown",value:function t(){!0==gameState.isOver&&this.selector.y!=this.btnClose.y&&(this.selector.y=this.btnClose.y,this.btnCloseText.setColor("white"),this.clickSound.play())}},{key:"selectorUp",value:function t(){!0==gameState.isOver&&this.selector.y!=this.btnRestart.y&&(this.selector.y=this.btnRestart.y,mainMenu.clickSound.play())}},{key:"gameToggle",value:function t(){!0==gameState.isOver&&(this.selector.y==this.btnRestart.y?(mainMenu.clickSound.play(),this.startGame()):this.selector.y==this.btnClose.y&&(mainMenu.clickSound.play(),this.exit()))}},{key:"startGame",value:function t(){gameState.isOver=!1,gameState.score=0,mainMenu.texturePack=getTexturePack(),this.scene.start("snakegame")}},{key:"exit",value:function t(){var e;game_session.onClose=!0,null===(e=window)||void 0===e||e.parent.postMessage("GameExit","*"),game_session.action.closeGameSession=new Date().getTime()}},{key:"onPressExit",value:function t(){!1==gameState.onGame&&this.exit()}},{key:"saveScore",value:function t(){this.heighScore=gameState.score,game_session.highscore=JSON.parse(localStorage.getItem("heighScore_snake")),this.oldScore=JSON.parse(localStorage.getItem("heighScore_snake")),this.heighScore>this.oldScore?localStorage.setItem("heighScore_snake",JSON.stringify(this.heighScore)):this.heighScore=this.oldScore}},{key:"loadScore",value:function t(){localStorage.getItem("heighScore_snake")&&(console.log(localStorage.getItem("heighScore_snake")),this.hieghScoreText=this.add.text(game.config.width/2,game.config.height-100,"РЕКОРД: ".concat(JSON.parse(localStorage.getItem("heighScore_snake"))),{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"40px",fill:"#2E3D66"}).setOrigin(.5))}},{key:"update",value:function t(){this.selector.y===this.btnClose.y?this.btnCloseText.setColor("white"):this.btnCloseText.setColor("#F0516B"),this.selector.y===this.btnRestart.y?this.btnRestartText.setColor("white"):this.btnRestartText.setColor("#F0516B")}}]),i}(Phaser.Scene),gameOver=new GameOver;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==_typeof(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){return e.__proto__=i,e})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function i(){var o,n=_getPrototypeOf(t);if(e){var s=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}var MainMenu=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(){return _classCallCheck(this,i),e.call(this,{key:"mainMenu"})}return _createClass(i,[{key:"create",value:function t(){var e=this;game_session.action.startGameSession=new Date().getTime(),console.log(game_session.action.startGameSession),this.texturePack=getTexturePack(),gameState.onMenu=!0,this.menuBG=this.add.image(game.config.width/2,game.config.height/2,"mainBG_".concat(this.texturePack)).setOrigin(.5),this.menuBG.setDisplaySize(game.config.width,game.config.height),this.mainbg=this.add.image(game.config.width/2,game.config.height/2,"menuStart").setOrigin(.5),this.mainbg.setDisplaySize(game.config.width,game.config.height),this.controlsInfo=this.add.image(game.config.width-310,70,"controlsInfo").setOrigin(.5),this.btnStart=this.add.sprite(game.config.width/2,game.config.height/2+100,"button").setScale(.5),this.btnStart.setOrigin(.5),this.btnClose=this.add.sprite(this.btnStart.x,this.btnStart.y+120,"button").setScale(.5),this.btnClose.setOrigin(.5),this.selector=this.add.image(this.btnStart.x,this.btnStart.y,"selector").setScale(.44),this.selector.setOrigin(.5),this.btnStartText=this.add.text(this.btnStart.x,this.btnStart.y,"НАЧАТЬ ИГРУ",{fontFamily:"Nunito",fontSize:"60px",color:"black",fontStyle:"bold",align:"center"}),this.btnStartText.setOrigin(.5),this.btnCloseText=this.add.text(this.btnClose.x,this.btnClose.y,"ВЫЙТИ",{fontFamily:"Nunito",fontSize:"60px",color:"black",fontStyle:"bold",align:"center"}),this.btnCloseText.setOrigin(.5),this.input.keyboard.on("keydown-ENTER",this.gameToggle,this),document.addEventListener("keydown",function(t){(8==t.keyCode||10009==t.keyCode||461==t.keyCode||166==t.keyCode||196==t.keyCode)&&e.onPressExit()}),this.clickSound=this.sound.add("click",{loop:!1}),this.loadScore(),this.anims.create({key:"food-animation",frames:[{key:"food_small",duration:500},{key:"food",duration:500},{key:"food_big",duration:500}],frameRate:6,repeat:-1}),this.bonus=new Bonus(this,-1,-1,"bonus_".concat(1),1),this.bonus.alpha=0,this.anims.create({key:"liking_0",frames:[{key:"head_0"},{key:"head_lick_0",duration:1e3}],frameRate:6,repeat:-1}),this.anims.create({key:"liking_1",frames:[{key:"head_1"},{key:"head_lick_1",duration:1e3}],frameRate:6,repeat:-1}),this.anims.create({key:"liking_2",frames:[{key:"head_2"},{key:"head_lick_2",duration:1e3}],frameRate:6,repeat:-1}),this.anims.create({key:"onGodeAnimation_0",frames:[{key:"head_helmet_0"},{key:"head_helmet_nolick_0",duration:1e3}],frameRate:4,repeat:-1}),this.anims.create({key:"onGodeAnimation_1",frames:[{key:"head_helmet_1"},{key:"head_helmet_nolick_1",duration:1e3}],frameRate:4,repeat:-1}),this.anims.create({key:"onGodeAnimation_2",frames:[{key:"head_helmet_2"},{key:"head_helmet_nolick_2",duration:1e3}],frameRate:4,repeat:-1}),this.versionText=this.add.text(game.config.width-60,game.config.height-40,"".concat(game_version),{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"30px",fill:"#fff"}).setOrigin(.5)}},{key:"checkPosX",value:function t(e,i){console.log("Координаты клика:".concat(e.offsetX,", ").concat(e.offsetY));var o=!1;return i.forEach(function(t){t===e.offsetX&&(o=!0)}),o}},{key:"checkPosY",value:function t(e,i){var o=!1;return i.forEach(function(t){Math.floor(t)===e.offsetY&&(o=!0)}),o}},{key:"loadScore",value:function t(){localStorage.getItem("heighScore_snake")?(game_session.highscore=JSON.parse(localStorage.getItem("heighScore_snake")),this.hieghScoreText=this.add.text(game.config.width/2,game.config.height-100,"РЕКОРД  ".concat(JSON.parse(localStorage.getItem("heighScore_snake"))),{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"65px",fill:"#2E3D66"}).setOrigin(.5)):this.hieghScoreText=this.add.text(game.config.width/2,game.config.height-100,"РЕКОРД 0",{fontFamily:"Nunito",fontStyle:"bold",fontSize:"65px",fill:"#2E3D66"}).setOrigin(.5)}},{key:"selectorDown",value:function t(){!0==gameState.onMenu&&this.selector.y!=this.btnClose.y&&(this.selector.y=this.btnClose.y,this.btnCloseText.setColor("white"),this.clickSound.play())}},{key:"selectorUp",value:function t(){!0==gameState.onMenu&&this.selector.y!=this.btnStart.y&&(this.selector.y=this.btnStart.y,this.clickSound.play())}},{key:"gameToggle",value:function t(){if(!0==gameState.onMenu){if(this.selector.y==this.btnStart.y)this.startGame(),this.clickSound.play();else if(this.selector.y==this.btnClose.y){var e;this.clickSound.play(),null===(e=window)||void 0===e||e.parent.postMessage("GameExit","*"),this.exit()}}}},{key:"startGame",value:function t(){gameState.onMenu=!1,this.scene.start("snakegame")}},{key:"exit",value:function t(){game_session.action.closeGameSession=new Date().getTime()}},{key:"onPressExit",value:function t(){!1==gameState.onGame&&gameOver.exit()}},{key:"update",value:function t(){this.selector.y===this.btnClose.y?this.btnCloseText.setColor("white"):this.btnCloseText.setColor("#F0516B"),this.selector.y===this.btnStart.y?this.btnStartText.setColor("white"):this.btnStartText.setColor("#F0516B")}}]),i}(Phaser.Scene),mainMenu=new MainMenu;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==_typeof(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){return e.__proto__=i,e})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function i(){var o,n=_getPrototypeOf(t);if(e){var s=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}var ScenePause=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(){return _classCallCheck(this,i),e.call(this,{key:"scenePause"})}return _createClass(i,[{key:"create",value:function t(){var e=this;gameState.onPause=!0,this.bgpauseImage=this.add.image(game.config.width/2,game.config.height/2,"mainBG_".concat(mainMenu.texturePack)).setOrigin(.5),this.bgpauseImage.setDisplaySize(game.config.width,game.config.height),this.pauseScreen=this.add.image(game.config.width/2,game.config.height/2,"pause").setOrigin(.5).setDisplaySize(game.config.width,game.config.height),this.btnStart=this.add.sprite(game.config.width/2,game.config.height/2+100,"button").setScale(.5),this.btnStart.setOrigin(.5),this.btnClose=this.add.sprite(this.btnStart.x,this.btnStart.y+120,"button").setScale(.5),this.btnClose.setOrigin(.5),this.selector=this.add.image(game.config.width/2,game.config.height/2+100,"selector"),this.selector.setScale(.44),this.selector.setOrigin(.5),this.btnStartText=this.add.text(game.config.width/2,game.config.height/2+100,"ПРОДОЛЖИТЬ",{fontFamily:"Nunito",fontSize:"60px",color:"black",fontStyle:"bold",align:"center"}),this.btnStartText.setOrigin(.5),this.btnCloseText=this.add.text(this.btnClose.x,this.btnClose.y,"ВЫЙТИ",{fontFamily:"Nunito",fontSize:"60px",color:"black",fontStyle:"bold",align:"center"}),this.btnCloseText.setOrigin(.5),this.btnStart.setInteractive(),this.btnClose.setInteractive(),this.btnClose.on("pointerdown",this.exit,this),this.btnStart.on("pointerdown",this.resumeGame,this),document.addEventListener("keydown",function(t){(8==t.keyCode||10009==t.keyCode||461==t.keyCode||166==t.keyCode||196==t.keyCode)&&e.onPressExit()}),this.input.keyboard.on("keydown-ENTER",this.gameToggle,this),this.scoreText=this.add.text(game.config.width/2,game.config.height-150,"СЧЁТ: ".concat(gameState.score),{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"32px",fill:"#2E3D66"}).setOrigin(.5),this.loadScore()}},{key:"loadScore",value:function t(){localStorage.getItem("heighScore_snake")&&(console.log(localStorage.getItem("heighScore_snake")),this.hieghScoreText=this.add.text(game.config.width/2,game.config.height-100,"РЕКОРД: ".concat(JSON.parse(localStorage.getItem("heighScore_snake"))),{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"40px",fill:"#2E3D66"}).setOrigin(.5))}},{key:"selectorDown",value:function t(){!0==gameState.onPause&&this.selector.y!=this.btnClose.y&&(this.selector.y=this.btnClose.y,mainMenu.clickSound.play())}},{key:"selectorUp",value:function t(){!0==gameState.onPause&&this.selector.y!=this.btnStart.y&&(this.selector.y=this.btnStart.y,mainMenu.clickSound.play())}},{key:"gameToggle",value:function t(){if(!0==gameState.onPause){if(this.selector.y==this.btnStart.y)this.resumeGame(),mainMenu.clickSound.play();else if(this.selector.y==this.btnClose.y){var e;mainMenu.clickSound.play(),null===(e=window)||void 0===e||e.parent.postMessage("GameExit","*"),gameOver.exit()}}}},{key:"resumeGame",value:function t(){gameState.onPause=!1,gameState.onGame=!0,this.scene.resume(snacegame),this.scene.stop(scenePause)}},{key:"exit",value:function t(){game_session.action.closeGameSession=new Date().getTime()}},{key:"onPressExit",value:function t(){!0==gameState.onPause&&gameOver.exit()}},{key:"update",value:function t(){this.selector.y===this.btnClose.y?this.btnCloseText.setColor("white"):this.btnCloseText.setColor("#F0516B"),this.selector.y===this.btnStart.y?this.btnStartText.setColor("white"):this.btnStartText.setColor("#F0516B")}}]),i}(Phaser.Scene),scenePause=new ScenePause;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==_typeof(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){return e.__proto__=i,e})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function i(){var o,n=_getPrototypeOf(t);if(e){var s=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}var Preloader=function(t){"use strict";_inherits(i,t);var e=_createSuper(i);function i(){var t;return _classCallCheck(this,i),(t=e.call(this,{key:"preloader"})).loadText,t}return _createClass(i,[{key:"preload",value:function t(){this.loadText=this.add.text(game.config.width/2,game.config.height/2,"ЗАГРУЗКА...",{fontFamily:"Nunito-black",fontStyle:"bold",fontSize:"40px",fill:"white"}),this.loadText2=this.add.text(game.config.width/2,game.config.height/2,"ЗАГРУЗКА...",{fontFamily:"Nunito",fontStyle:"bold",fontSize:"40px",fill:"white"}),this.loadText2.visible=!1,this.loadText.setOrigin(.5),this.load.setPath("assets/"),this.load.image("info","gameInfo.png"),this.load.image("controlsInfo","controlsInfo.png"),this.load.image("background_0","skins/bg_0.png"),this.load.image("background_1","skins/bg_1.png"),this.load.image("background_2","skins/bg_2.png"),this.load.image("head_0","skins/head_0.png"),this.load.image("head_1","skins/head_1.png"),this.load.image("head_2","skins/head_2.png"),this.load.image("head_lick_0","/skins/head_lick_0.png"),this.load.image("head_lick_1","/skins/head_lick_1.png"),this.load.image("head_lick_2","/skins/head_lick_2.png"),this.load.image("body_0","skins/body_0.png"),this.load.image("body_1","skins/body_1.png"),this.load.image("body_2","skins/body_2.png"),this.load.image("tail_0","skins/tail_0.png"),this.load.image("tail_1","skins/tail_1.png"),this.load.image("tail_2","skins/tail_2.png"),this.load.image("scoreIcon","ui/scoreIcon.png"),this.load.image("bestIcon","ui/bestIcon.png"),this.load.image("menuStart","ui/menuStart.png"),this.load.image("menuGameOver","ui/menuGameOver.png"),this.load.image("mainBG_0","ui/uibg_0.png"),this.load.image("mainBG_1","ui/uibg_1.png"),this.load.image("mainBG_2","ui/uibg_2.png"),this.load.image("pause","ui/pause.png"),this.load.image("button","button.png"),this.load.image("selector","selector.png"),this.load.image("food","food.png"),this.load.image("food_small","food_small.png"),this.load.image("food_big","food_big.png"),this.load.image("bonus_1","bonus_1.png"),this.load.image("bonus_0","bonus_0.png"),this.load.image("bonus_small_0","bonus_small_0.png"),this.load.image("bonus_small_1","bonus_small_1.png"),this.load.image("bonus_big_0","bonus_big_0.png"),this.load.image("bonus_big_1","bonus_big_1.png"),this.load.image("head_helmet_0","/skins/head_helmet_0.png"),this.load.image("head_helmet_1","/skins/head_helmet_1.png"),this.load.image("head_helmet_2","/skins/head_helmet_2.png"),this.load.image("head_helmet_nolick_0","/skins/head_helmet_nolick_0.png"),this.load.image("head_helmet_nolick_1","/skins/head_helmet_nolick_1.png"),this.load.image("head_helmet_nolick_2","/skins/head_helmet_nolick_2.png"),this.load.audio("background-music","sounds/background_music.mp3"),this.load.audio("bite","sounds/bite.mp3"),this.load.audio("bonus","sounds/bonus.mp3"),this.load.audio("click","sounds/click.mp3"),this.load.audio("down","sounds/down.mp3"),this.load.audio("left","sounds/left.mp3"),this.load.audio("lose","sounds/lose.mp3"),this.load.audio("right","sounds/right.mp3"),this.load.audio("up","sounds/up.mp3")}},{key:"create",value:function t(){this.scene.start(mainMenu)}}]),i}(Phaser.Scene),preloader=new Preloader;